import{u as A,d as t,ao as K,i as e,ap as P,F as x,W as X,aq as Z,ar as d,as as J,at as Q,K as w,au as N,av as O,aw as B,_ as U,t as v,b as Y,v as ee,w as y,x as te,p as re,a7 as ae,L as I,ae as le,B as se,a0 as j,af as ne,ai as ie,aj as oe,aa as G,am as ce,an as de,j as ue}from"./index-o5lPLXoZ.js";import{c as ge,g as ve,a as he,e as fe,f as W,r as me}from"./index-Bt-xnT5v.js";import{C as M}from"./ConfigTitle-Ct7fRULr.js";var be=v('<div class="flex flex-col gap-4"><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full">'),R=v("<option>");const pe=h=>{const[l]=A();return t(U,{ref:i=>{var o;return(o=h.ref)==null?void 0:o.call(h,i)},get icon(){return t(K,{size:24})},get title(){return l("logsSettings")},get children(){var i=be(),o=i.firstChild,c=o.firstChild,_=o.nextSibling,p=_.firstChild,C=_.nextSibling,f=C.firstChild;return e(o,t(M,{withDivider:!0,get children(){return l("tableSize")}}),c),c.addEventListener("change",r=>P(r.target.value)),e(c,t(x,{get each(){return Object.values(X)},children:r=>(()=>{var s=R();return s.value=r,e(s,()=>l(r)),s})()})),e(_,t(M,{withDivider:!0,get children(){return l("logLevel")}}),p),p.addEventListener("change",r=>Z(r.target.value)),e(p,t(x,{get each(){return[d.Info,d.Error,d.Warning,d.Debug,d.Silent]},children:r=>(()=>{var s=R();return s.value=r,e(s,()=>l(r)),s})()})),e(C,t(M,{withDivider:!0,get children(){return l("logMaxRows")}}),f),f.addEventListener("change",r=>J(parseInt(r.target.value))),e(f,t(x,{each:Q,children:r=>(()=>{var s=R();return s.value=r,e(s,r),s})()})),w(()=>c.value=N()),w(()=>p.value=O()),w(()=>f.value=B()),i}})};var _e=v("<span>"),$e=v('<div class="flex h-full flex-col gap-2"><div class="join w-full"><input type=search class="input input-sm join-item input-primary flex-1 flex-shrink-0 sm:input-md"></div><div class="overflow-x-auto whitespace-nowrap rounded-md bg-base-300"><table><thead class="sticky top-0 z-10"></thead><tbody>'),Se=v("<tr>"),xe=v('<th class=bg-base-200><div class="flex items-center"><div>'),we=v('<tr class="hover:!bg-primary hover:text-primary-content">'),Ce=v("<td class=py-2>");const q=(h,l,i,o)=>{const c=me(h.getValue(l),i);return o({itemRank:c}),c.passed},Ie=()=>{const h=Y();if(!ee())return h("/setup",{replace:!0}),null;let l;const[i]=A();let o=1;const[c,_]=y([]),p=te("logs",{level:O()});re(()=>{const a=p();a&&(_(m=>[{...a,seq:o},...m].slice(0,B())),o++)});const[C,f]=y(""),[r,s]=ae(y([]),{name:"logsTableSorting",storage:localStorage}),V=[{header:i("sequence"),accessorFn:a=>a.seq},{header:i("type"),accessorFn:a=>a.type,cell:({row:a})=>{const m=a.original.type;let u="";switch(m){case d.Error:u="text-error";break;case d.Warning:u="text-warning";break;case d.Info:u="text-info";break;case d.Debug:u="text-success";break}return(()=>{var $=_e();return I($,u),e($,()=>`[${a.original.type}]`),$})()}},{header:i("payload"),accessorFn:a=>a.payload}],k=ge({filterFns:{fuzzy:q},state:{get globalFilter(){return C()},get sorting(){return r()}},get data(){return c()},sortDescFirst:!0,columns:V,onGlobalFilterChange:f,onSortingChange:s,globalFilterFn:q,getFilteredRowModel:ve(),getSortedRowModel:he(),getCoreRowModel:fe()});return(()=>{var a=$e(),m=a.firstChild,u=m.firstChild,$=m.nextSibling,E=$.firstChild,D=E.firstChild,H=D.nextSibling;return u.$$input=n=>f(n.target.value),e(m,t(se,{class:"join-item btn-sm sm:btn-md",onClick:()=>l==null?void 0:l.showModal(),get icon(){return t(le,{})}}),null),e(D,t(j,{get each(){return k.getHeaderGroups()},children:n=>{const b=n();return(()=>{var g=Se();return e(g,t(j,{get each(){return b.headers},children:L=>{const S=L();return(()=>{var z=xe(),T=z.firstChild,F=T.firstChild;return ne(F,"click",S.column.getToggleSortingHandler(),!0),e(F,()=>W(S.column.columnDef.header,S.getContext())),e(T,()=>({asc:t(ie,{}),desc:t(oe,{})})[S.column.getIsSorted()]??null,null),w(()=>I(F,G(S.column.getCanSort()&&"cursor-pointer select-none","flex-1"))),z})()}})),g})()}})),e(H,t(x,{get each(){return k.getRowModel().rows},children:n=>(()=>{var b=we();return e(b,t(x,{get each(){return n.getVisibleCells()},children:g=>(()=>{var L=Ce();return e(L,()=>W(g.column.columnDef.cell,g.getContext())),L})()})),b})()})),e(a,t(pe,{ref:n=>l=n}),null),w(n=>{var b=i("search"),g=G(ce(N()),"table relative rounded-none");return b!==n.e&&de(u,"placeholder",n.e=b),g!==n.t&&I(E,n.t=g),n},{e:void 0,t:void 0}),a})()};ue(["input","click"]);export{Ie as default};
